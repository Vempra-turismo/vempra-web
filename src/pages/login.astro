---
import Layout from '@/layouts/Layout.astro';

// Si el usuario ya est치 logueado, lo mandamos directo al panel de admin
if (Astro.cookies.has('session')) {
  return Astro.redirect('/admin');
}

// Revisa si hay un mensaje de error en la URL
const error = Astro.url.searchParams.get('error');
---
<Layout 
  title="Login | Panel de Administraci칩n" 
  description="Acceso al panel de administraci칩n."
>
  <main class="pt-32 flex items-center justify-center min-h-screen bg-gray-50">
    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-md">
      <h1 class="text-3xl font-bold text-center text-gray-800">Acceso de Administrador</h1>
      
      {error && (
        <div class="p-4 text-sm text-red-700 bg-red-100 rounded-lg" role="alert">
          <span class="font-medium">Error:</span> {error}
        </div>
      )}

      <form method="POST" action="/api/auth/login" class="space-y-6">
        <div>
          <label for="password" class="block mb-2 text-sm font-medium text-gray-700">Contrase침a</label>
          <input type="password" name="password" id="password" class="w-full px-4 py-2 border rounded-lg bg-gray-50 focus:ring-primary focus:border-primary" required />
        </div>
        <div>
          <button type="submit" class="w-full px-4 py-2 font-bold text-white bg-primary rounded-lg hover:bg-opacity-90 transition-colors duration-300" data-form-loading>
            Ingresar
          </button>
        </div>
      </form>
    </div>
  </main>
</Layout>